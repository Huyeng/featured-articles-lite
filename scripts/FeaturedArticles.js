/**
 * FeaturedArticles - article rotator
 *
 * This script is part of a Wordpress plugin that is available here: http://www.php-help.ro/mootools-12-javascript-examples/wordpress-featured-content-plugin/
 * Plugin is completely free and very flexible, allowing new themes to be developed for it and plenty of options directly from WP admin.
 *
 * @version		2.0
 * @license		MIT-style license
 * @author		Constantin Boiangiu <constantin [at] php-help.ro>
 * @copyright	Author
 */
(function(){
var $ = document.id;this.FeaturedArticles=new Class({Implements:[Options],options:{container:null,slides:null,slideDuration:null,effectDuration:1000,fadeDist:null,fadePosition:null,stopSlideOnClick:true,autoSlide:true},initialize:function(A){this.setOptions(A);if(!$(this.options.container)||!this.options.slides){return}this.currentKey=0;this.container=$(this.options.container);this.start()},start:function(){this.prepareSlides();this.injectNavigation();if(this.options.autoSlide){this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000);this.container.addEvents({mouseenter:function(A){if($defined(this.period)){$clear(this.period)}}.bind(this),mouseleave:function(A){if($defined(this.period)){$clear(this.period)}this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000)}.bind(this)})}this.container.addEvent("mousewheel",function(B){if($defined(this.period)){$clear(this.period)}if(B.wheel==1){var A=this.currentKey-1<0?this.slides.length-1:this.currentKey-1}else{if(B.wheel==-1){var A=this.currentKey+1>this.slides.length-1?0:this.currentKey+1}}B.preventDefault();this.goToSlide(A,B.wheel);if(!this.options.stopSlideOnClick&&this.options.autoSlide){this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000)}}.bind(this))},prepareSlides:function(){this.slides=this.container.getElements(this.options.slides);if(this.options.fadePosition=="left"){this.slides.setStyle("width","88%")}this.container.getElements(".FA_image").each(function(D){var G=D.get("width");var F=D.get("height");D.removeProperties("width","height");var B=D.getSize();if(B.x<=G&&B.y<=F){return}var C=B.x/B.y;if(C<1){var A=F;var E=(G*C).toInt()}else{var E=G;var A=(F/C).toInt()}D.set({width:E,height:A});D.getParent().setStyles({"margin-top":(F-A)/2,"margin-left":(G-E)/2})});this.slides.set("morph",{wait:false,duration:this.options.effectDuration||800,transition:"cubic:out"});this.totalSlides=this.slides.length;this.slides.setStyles({position:"absolute",top:0,left:0,opacity:0});this.slides[this.currentKey].setStyle("opacity",1)},injectNavigation:function(){if(this.slides.length<2){return}this.navLinks=$$(".FA_navigation a");this.navLinks.each(function(D,C){var E=D.getParent().getElement("span");if(E){E.set("morph",{duration:300,wait:false})}D.addEvents({click:function(F){new Event(F).stop();if($defined(this.period)){$clear(this.period)}this.goToSlide(C);if(!this.options.stopSlideOnClick&&this.options.autoSlide){this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000)}}.bind(this),mouseenter:function(){if(E){E.setStyles({display:"block",top:-25,opacity:0}).morph({opacity:1,top:-20})}},mouseleave:function(){if(E){E.setStyles({display:"none",opacity:0,top:-25})}}});if(C==this.currentKey){this.navLinks[C].addClass("active")}}.bind(this));var A=$$(".FA_back");var B=$$(".FA_next");A.addEvent("click",function(D){new Event(D).stop();if($defined(this.period)){$clear(this.period)}var C=this.currentKey-1>=0?this.currentKey-1:this.slides.length-1;this.goToSlide(C,1);if(!this.options.stopSlideOnClick&&this.options.autoSlide){this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000)}}.bind(this));B.addEvent("click",function(D){new Event(D).stop();if($defined(this.period)){$clear(this.period)}var C=this.currentKey+1<this.slides.length?this.currentKey+1:0;this.goToSlide(C);if(!this.options.stopSlideOnClick&&this.options.autoSlide){this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000)}}.bind(this))},startSlides:function(){var A=this.currentKey+1>=this.totalSlides?0:this.currentKey+1;this.goToSlide(A)},goToSlide:function(A,B){if(A==this.currentKey){return}if(!$defined(this.slides[A])){return}if(!$defined(B)){var B=-1}var C=this.options.fadePosition=="left"?"left":"top";switch(C){case"top":this.slides[this.currentKey].morph({opacity:0,top:[0,B*this.options.fadeDist]});this.slides[A].setStyle(C,-this.options.fadeDist).morph({opacity:1,top:[-B*this.options.fadeDist,0]});break;case"left":this.slides[this.currentKey].morph({opacity:0,left:[0,B*this.options.fadeDist]});this.slides[A].setStyle(C,-this.options.fadeDist).morph({opacity:1,left:[-B*this.options.fadeDist,0]});break}if($defined(this.navLinks[this.currentKey])){this.navLinks[this.currentKey].removeClass("active");this.navLinks[A].addClass("active")}this.currentKey=A}});
})();
window.addEvent("load",function(){new FeaturedArticles(FA_settings)});