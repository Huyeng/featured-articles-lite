/**
 * FeaturedArticles - article rotator
 *
 * This script is part of a Wordpress plugin that is available here: http://www.php-help.ro/mootools-12-javascript-examples/wordpress-featured-content-plugin/
 * Plugin is completely free and very flexible, allowing new themes to be developed for it and plenty of options directly from WP admin.
 *
 * @version		2.0
 * @license		MIT-style license
 * @author		Constantin Boiangiu <constantin [at] php-help.ro>
 * @copyright	Author
 */
(function(){var A=document.id;this.FeaturedArticles=new Class({Implements:[Options],options:{container:null,slides:null,slideDuration:null,effectDuration:1000,fadeDist:null,fadePosition:null,stopSlideOnClick:true,autoSlide:true,mouseWheelNav:true},initialize:function(B){this.setOptions(B);if(!A(this.options.container)||!this.options.slides){return}this.currentKey=0;this.container=A(this.options.container);this.start()},start:function(){this.prepareSlides();this.injectNavigation();if(this.options.autoSlide){this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000);this.container.addEvents({mouseenter:function(B){if($defined(this.period)){$clear(this.period)}}.bind(this),mouseleave:function(B){if($defined(this.period)){$clear(this.period)}this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000)}.bind(this)})}if(!this.options.mouseWheelNav){return}this.container.addEvent("mousewheel",function(C){if($defined(this.period)){$clear(this.period)}if(C.wheel==1){var B=this.currentKey-1<0?this.slides.length-1:this.currentKey-1}else{if(C.wheel==-1){var B=this.currentKey+1>this.slides.length-1?0:this.currentKey+1}}C.preventDefault();this.goToSlide(B,C.wheel);if(!this.options.stopSlideOnClick&&this.options.autoSlide){this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000)}}.bind(this))},prepareSlides:function(){this.slides=this.container.getElements(this.options.slides);if(this.options.fadePosition=="left"){this.slides.setStyle("width","88%")}this.container.getElements(".FA_image").each(function(E){var H=E.get("width");var G=E.get("height");E.removeProperties("width","height");var C=E.getSize();if(C.x<=H&&C.y<=G){return}var D=C.x/C.y;if(D<1){var B=G;var F=(H*D).toInt()}else{var F=H;var B=(G/D).toInt()}E.set({width:F,height:B});E.getParent().setStyles({"margin-top":(G-B)/2,"margin-left":(H-F)/2})});this.slides.set("morph",{wait:false,duration:this.options.effectDuration||800,transition:"cubic:out"});this.totalSlides=this.slides.length;this.slides.setStyles({position:"absolute",top:0,left:0,opacity:0});this.slides[this.currentKey].setStyle("opacity",1)},injectNavigation:function(){if(this.slides.length<2){return}this.navLinks=$$(".FA_navigation a");this.navLinks.each(function(E,D){var F=E.getParent().getElement("span");if(F){F.set("morph",{duration:300,wait:false})}E.addEvents({click:function(G){new Event(G).stop();if($defined(this.period)){$clear(this.period)}this.goToSlide(D);if(!this.options.stopSlideOnClick&&this.options.autoSlide){this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000)}}.bind(this),mouseenter:function(){if(F){F.setStyles({display:"block",top:-25,opacity:0}).morph({opacity:1,top:-20})}},mouseleave:function(){if(F){F.setStyles({display:"none",opacity:0,top:-25})}}});if(D==this.currentKey){this.navLinks[D].addClass("active")}}.bind(this));var B=$$(".FA_back");var C=$$(".FA_next");B.addEvent("click",function(E){new Event(E).stop();if($defined(this.period)){$clear(this.period)}var D=this.currentKey-1>=0?this.currentKey-1:this.slides.length-1;this.goToSlide(D,1);if(!this.options.stopSlideOnClick&&this.options.autoSlide){this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000)}}.bind(this));C.addEvent("click",function(E){new Event(E).stop();if($defined(this.period)){$clear(this.period)}var D=this.currentKey+1<this.slides.length?this.currentKey+1:0;this.goToSlide(D);if(!this.options.stopSlideOnClick&&this.options.autoSlide){this.period=this.startSlides.bind(this).periodical(this.options.slideDuration||5000)}}.bind(this))},startSlides:function(){var B=this.currentKey+1>=this.totalSlides?0:this.currentKey+1;this.goToSlide(B)},goToSlide:function(B,C){if(B==this.currentKey){return}if(!$defined(this.slides[B])){return}if(!$defined(C)){var C=-1}var D=this.options.fadePosition=="left"?"left":"top";switch(D){case"top":this.slides[this.currentKey].morph({opacity:0,top:[0,C*this.options.fadeDist]});this.slides[B].setStyle(D,-this.options.fadeDist).morph({opacity:1,top:[-C*this.options.fadeDist,0]});break;case"left":this.slides[this.currentKey].morph({opacity:0,left:[0,C*this.options.fadeDist]});this.slides[B].setStyle(D,-this.options.fadeDist).morph({opacity:1,left:[-C*this.options.fadeDist,0]});break}if($defined(this.navLinks[this.currentKey])){this.navLinks[this.currentKey].removeClass("active");this.navLinks[B].addClass("active")}this.currentKey=B}})})();window.addEvent("load",function(){var A=document.id;$$(FA_settings.container).each(function(B){FA_settings.container=B;new FeaturedArticles(FA_settings)})});